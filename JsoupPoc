import org.apache.jmeter.threads.jmeterVariables;
import org.jsoup.nodes.Document; 
import org.jsoup.Jsoup;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

String htmlResponse = prev.getResponseDataAsString();

// Parse the html using jsoup
Document doc = Jsoup.parse(htmlResponse)

Elements productElements = doc.select(“tr”)

// Initialize variables to start etracting data
def productIds = []
def productNames = []

// Iterate through the product elements
For (Element product element:productElements) {
  Elements tdElements = productElement.Select("td")
  if (tdElements.size() == 2) {
    string productId = tdElements.get(0).text()
    string productName = tdElements.get(1).text()

    productIds.add(productId)
    productNames.add(productName)
  }
}

// Set variables to jmeter variables for further use in test plan
vars.put("productIds", productIds.join(","))
vars.put("productNames", productNames.join(","))
